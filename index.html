<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>DeepHex Beta</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <style>
      html, body {
        width: 100%;
        height: 100%;
        margin: 0;
        overflow: hidden;
        background: #000;
      }

      #game-container {
        position: relative;
        width: 100%;
        height: 100%;
        background: #000;
        -webkit-tap-highlight-color: transparent;
      }

      /* Canvas and DOM overlay share the same rectangle */
      #game-container > canvas,
      #game-container > .dom-container {
        position: absolute;
        inset: 0;
        display: block;
      }

      /* Layer order */
      #game-container > canvas { z-index: 0; image-rendering: pixelated; }
      #game-container > .dom-container { z-index: 10; background: transparent !important; }

      /* IMPORTANT: let canvas get mouse events except where DOM controls exist */
      #game-container > .dom-container { pointer-events: none; }
      #game-container > .dom-container * { pointer-events: auto; }

      ::-webkit-scrollbar { display: none; }
    </style>
  </head>

  <body>
    <div id="game-container"></div>

    <script src="https://cdn.jsdelivr.net/npm/phaser@3/dist/phaser.min.js"></script>

    <script type="module">
      import LobbyScene from "./src/scenes/LobbyScene.js";
      import WorldScene from "./src/scenes/WorldScene.js";
      import CombatScene from "./src/scenes/CombatScene.js";

      const DESIGN_WIDTH = 1600;
      const DESIGN_HEIGHT = 1000;

      const config = {
        type: Phaser.AUTO,
        backgroundColor: "#000000",
        parent: "game-container",
        scene: [LobbyScene, WorldScene, CombatScene],
        scale: {
          mode: Phaser.Scale.FIT,
          autoCenter: Phaser.Scale.CENTER_BOTH,
          width: DESIGN_WIDTH,
          height: DESIGN_HEIGHT
        },
        resolution: window.devicePixelRatio || 1,
        render: {
          antialias: true,
          roundPixels: true,
          pixelArt: false
        },
        dom: { createContainer: true }
      };

      const game = new Phaser.Game(config);
      window.addEventListener("resize", () => { if (game && game.scale) game.scale.refresh(); });
    </script>
  </body>
</html>
